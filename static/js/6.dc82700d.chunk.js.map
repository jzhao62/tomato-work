{"version":3,"sources":["../node_modules/antd/es/divider/index.js","views/home/setting/account/index.tsx"],"names":["__rest","s","e","t","p","Object","prototype","hasOwnProperty","call","indexOf","getOwnPropertySymbols","i","length","propertyIsEnumerable","Divider","props","React","ConfigConsumer","_ref","_classNames","getPrefixCls","direction","customizePrefixCls","prefixCls","_props$type","type","_props$orientation","orientation","className","children","dashed","plain","restProps","orientationPrefix","concat","hasChildren","classString","classNames","_defineProperty","_extends","role","connect","userInfo","user","withRouter","Form","useForm","form","form2","a","validateFields","values","serviceUpdateUser","password","md5","console","log","serviceUpdateUserConfig","sckey","useEffect","serviceGetUserConfig","then","res","data","success","setFieldsValue","serverChanSckey","layout","style","width","Item","label","name","initialValue","loginName","rules","required","readOnly","disabled","message","pattern","maxLength","onClick","textAlign","marginTop","href","target","rel"],"mappings":"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","file":"static/js/6.dc82700d.chunk.js","sourcesContent":["import _extends from \"@babel/runtime/helpers/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport { ConfigConsumer } from '../config-provider';\n\nvar Divider = function Divider(props) {\n  return /*#__PURE__*/React.createElement(ConfigConsumer, null, function (_ref) {\n    var _classNames;\n\n    var getPrefixCls = _ref.getPrefixCls,\n        direction = _ref.direction;\n\n    var customizePrefixCls = props.prefixCls,\n        _props$type = props.type,\n        type = _props$type === void 0 ? 'horizontal' : _props$type,\n        _props$orientation = props.orientation,\n        orientation = _props$orientation === void 0 ? 'center' : _props$orientation,\n        className = props.className,\n        children = props.children,\n        dashed = props.dashed,\n        plain = props.plain,\n        restProps = __rest(props, [\"prefixCls\", \"type\", \"orientation\", \"className\", \"children\", \"dashed\", \"plain\"]);\n\n    var prefixCls = getPrefixCls('divider', customizePrefixCls);\n    var orientationPrefix = orientation.length > 0 ? \"-\".concat(orientation) : orientation;\n    var hasChildren = !!children;\n    var classString = classNames(prefixCls, \"\".concat(prefixCls, \"-\").concat(type), (_classNames = {}, _defineProperty(_classNames, \"\".concat(prefixCls, \"-with-text\"), hasChildren), _defineProperty(_classNames, \"\".concat(prefixCls, \"-with-text\").concat(orientationPrefix), hasChildren), _defineProperty(_classNames, \"\".concat(prefixCls, \"-dashed\"), !!dashed), _defineProperty(_classNames, \"\".concat(prefixCls, \"-plain\"), !!plain), _defineProperty(_classNames, \"\".concat(prefixCls, \"-rtl\"), direction === 'rtl'), _classNames), className);\n    return /*#__PURE__*/React.createElement(\"div\", _extends({\n      className: classString\n    }, restProps, {\n      role: \"separator\"\n    }), children && /*#__PURE__*/React.createElement(\"span\", {\n      className: \"\".concat(prefixCls, \"-inner-text\")\n    }, children));\n  });\n};\n\nexport default Divider;","/**\n * 账号设置\n */\nimport React, { useEffect } from 'react';\nimport md5 from 'blueimp-md5';\nimport { connect } from 'react-redux';\nimport { StoreState } from '@/store';\nimport { UserInfoProps } from '@/store/reducers/user';\nimport { RouteComponentProps, withRouter } from 'react-router-dom';\nimport { serviceUpdateUser, serviceGetUserConfig, serviceUpdateUserConfig } from '@/services';\nimport { Form, Input, Button, Divider } from 'antd';\n\ntype Props = {\n  userInfo: UserInfoProps;\n}\n\nconst Account: React.FC<Props & RouteComponentProps> = function ({ userInfo }) {\n  const [form] = Form.useForm();\n  const [form2] = Form.useForm();\n\n  async function handleUpdateUser() {\n    try {\n      const values = await form.validateFields();\n      serviceUpdateUser({ password: md5(values.password) });\n    } catch (err) {\n      console.log(err);\n    }\n  }\n\n  async function handleSckey() {\n    try {\n      const values = await form2.validateFields();\n      serviceUpdateUserConfig({ sckey: values.sckey });\n    } catch (err) {\n      console.log(err);\n    }\n  }\n\n  useEffect(() => {\n    serviceGetUserConfig()\n    .then(res => {\n      if (res.data.success) {\n        form.setFieldsValue({\n          sckey: res.data.data?.serverChanSckey || ''\n        });\n      }\n    });\n  }, []);\n\n  return (\n    <div className=\"account-setting\">\n      <Divider orientation=\"left\">修改密码</Divider>\n      <Form layout=\"vertical\" form={form} style={{ width: '300px' }}>\n        <Form.Item\n          label=\"登录名\"\n          name=\"name\"\n          initialValue={userInfo.loginName}\n          rules={[\n            {\n              required: true\n            }\n          ]}\n        >\n          <Input readOnly disabled />\n        </Form.Item>\n        <Form.Item\n          label=\"新密码\"\n          name=\"password\"\n          rules={[\n            {\n              required: true,\n              message: \"请输入新密码\"\n            },\n            {\n              pattern: /.{6,}/,\n              message: \"新密码至少6位\"\n            }\n          ]}\n        >\n          <Input type=\"password\" maxLength={32} />\n        </Form.Item>\n        <Form.Item>\n          <Button type=\"primary\" onClick={handleUpdateUser}>提交</Button>\n        </Form.Item>\n      </Form>\n\n      <Divider orientation=\"left\">Server酱配置</Divider>\n\n      <Form layout=\"vertical\" form={form2} style={{ width: '300px' }}>\n        <Form.Item\n          label=\"SCKEY\"\n          name=\"sckey\"\n          rules={[\n            {\n              required: true,\n              message: '请正确填写SCKEY'\n            }\n          ]}\n        >\n          <Input maxLength={100} />\n        </Form.Item>\n        <div style={{ textAlign: 'right', marginTop: '5px' }}>\n          <a href=\"http://sc.ftqq.com\" target=\"_blank\" rel=\"noopener noreferrer\">如何获取？</a>\n        </div>\n        <Form.Item>\n          <Button type=\"primary\" onClick={handleSckey}>提交</Button>\n        </Form.Item>\n      </Form>\n    </div>\n  );\n};\n\nconst mapStateToProps = ({ user }: StoreState): { userInfo: UserInfoProps } => {\n  return { userInfo: user.userInfo };\n};\n\nexport default connect(mapStateToProps)(withRouter(Account));\n"],"sourceRoot":""}